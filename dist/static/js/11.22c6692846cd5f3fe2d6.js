webpackJsonp([11],{L3Mh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("ktb4"),i={name:"",props:["name"],data:function(){return{oname:this.name,imgsrc:"/static/uploads/"+this.name}},computed:{staticLocate:function(){return window.location.origin+"/static/uploads/"+this.name}},methods:{Save:function(){var t=this,e=new FormData(this.$el.querySelector(".fileform"));axios.request({url:"/setting/alterimage/image/"+this.name,method:"post",data:e}).then(function(e){1==e.data.state&&t.$emit("rename",t.oname),modal.Common(e)})},Delete:function(){var t=this;"new.file"!=this.name?axios.get("/setting/deleteimage/image/"+this.name).then(function(e){modal.Common(e),1==e.data.state&&t.$emit("goback")}):this.$emit("goback")},File_input:function(t){var e=t.target.files[0];if(e){var a=new FileReader(e);a.onloadend=function(){this.imgsrc=a.result}.bind(this),a.readAsDataURL(e)}else this.imgsrc="/static/uploads/"+this.name}},mounted:function(){this.$store.commit("ChangeHolding",!0)},beforeDestroy:function(){this.$store.commit("ChangeHolding",!1)}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slidepanel",attrs:{id:"ImageEditor"}},[a("button",{staticClass:"close",on:{click:function(e){t.$emit("goback")}}},[t._v("×")]),t._v(" "),a("h2",[t._v(t._s(t.name))]),t._v(" "),a("div",{staticClass:"imgcontainer"},[a("a",{style:"background-image:url("+t.imgsrc+");",attrs:{href:"/static/uploads/"+t.name,target:"#"}})]),t._v(" "),a("form",{staticClass:"fileform"},[a("span",{staticClass:"label label-default"},[t._v("名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.oname,expression:"oname"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:t.oname},on:{input:function(e){e.target.composing||(t.oname=e.target.value)}}}),t._v(" "),a("span",{staticClass:"label label-default"},[t._v("上传")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"file",name:"imagefile"},on:{change:t.File_input}})]),t._v(" "),a("div",{staticClass:"alert alert-info"},[t._v("图片链接:\n    "),a("a",{staticClass:"alert-link",attrs:{target:"#",href:t.staticLocate}},[t._v(t._s(t.staticLocate))])]),t._v(" "),a("div",{staticClass:"flexdep"},[a("div",[a("div",{staticClass:"btn btn-info btn-block",on:{click:t.Save}},[t._v("保存")])]),t._v(" "),a("div",[a("div",{staticClass:"btn btn-warning btn-block",on:{click:t.Delete}},[t._v("删除")])])])])},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("ME42")},null,null).exports,l={name:"",components:{ImageSelect:n.a,ImageEditor:o},data:function(){return{selectedindex:-1}},methods:{UpdateEvent:function(t){t&&(this.selectedindex=t),this.$refs.select.Refresh()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Image"}},[a("h2",[t._v("图片设置")]),t._v(" "),a("ImageSelect",{ref:"select",on:{select:function(e){t.selectedindex=arguments[0]}}}),t._v(" "),a("div",{staticClass:"msbtn btn-info col-xs-12 col-sm-4 col-sm-offset-4",on:{click:function(e){t.selectedindex="new.jpg"}}},[t._v("新建")]),t._v(" "),a("div",{staticClass:"row"}),t._v(" "),a("transition",{attrs:{name:"fadeRight"}},[-1!=t.selectedindex?a("ImageEditor",{attrs:{name:t.selectedindex},on:{goback:function(e){t.selectedindex=-1},rename:t.UpdateEvent}}):t._e()],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,c,!1,function(t){a("lBE1")},null,null);e.default=r.exports},ME42:function(t,e){},lBE1:function(t,e){}});
//# sourceMappingURL=11.22c6692846cd5f3fe2d6.js.map