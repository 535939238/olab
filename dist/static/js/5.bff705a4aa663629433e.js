webpackJsonp([5],{"83Om":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("U/fA"),i={name:"",props:["apply"],data:function(){return{contains:"",reason:""}},computed:{State:function(){return["未提交","已过时","时间冲突","未通过审核","未审核","审核通过"][this.apply.state]}},methods:{AccessApply:function(){var t=this;modal.Show({title:"通过审核确定",contains:"确定要通过此审核吗？",certain:"确定",certained:function(){axios.get("/auselab/checkapply/id/"+t.apply.id).then(function(a){1==a.data.state&&(t.apply.state=5),modal.Common(a)})}})},RefuseApply:function(){var t=this,a=this.reason;modal.Show({title:"拒绝审核确定",SubComp:{template:'<div>\n            <h4>确定要撤回此申请吗?请写下撤回理由</h4>\n            <textarea cols="30" rows="10" class="form-control" placeholder="理由" v-model="reason"></textarea>\n        </div>',data:function(){return{reason:a}}},certain:"确定",certained:function(){var a={reason:modal.$children[0].reason};axios.post("auselab/checkapply/id/"+t.apply.id+"?refuse=1",a).then(function(e){1==e.data.state&&(t.apply.state=3,t.reason=a.reason),modal.Common(e)})}})},PrintApply:function(){window.open("/auselab/printapply/id/"+this.apply.id)}},mounted:function(){var t=this;axios.get("/auselab/applyeach/id/"+this.apply.id).then(function(a){t.contains=a.data}),axios.get("/auselab/refusereason/id/"+this.apply.id).then(function(a){t.reason=a.data}),this.$store.commit("ChangeHolding",!0)},beforeDestroy:function(){this.$store.commit("ChangeHolding",!1)}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"slidepanel",attrs:{id:"ApplyCheck"}},[e("button",{staticClass:"close",on:{click:function(a){t.$emit("goback")}}},[t._v("×")]),t._v(" "),e("div",{staticClass:"applyreview",domProps:{innerHTML:t._s(t.contains)}}),t._v(" "),e("p",{staticClass:"bg-primary"},[t._v("当前状态： "+t._s(t.State)+"\n    "),3==t.apply.state?[e("br"),t._v("未通过原因: "+t._s(t.reason))]:t._e()],2),t._v(" "),e("div",{staticClass:"btncon",staticStyle:{"margin-top":"50px"}},[e("div",{staticClass:"btn btn-lg btn-success col-sm-2 col-sm-offset-2 col-xs-12",on:{click:t.AccessApply}},[t._v("通过申请")]),t._v(" "),e("div",{staticClass:"btn btn-lg btn-warning col-sm-2 col-sm-offset-1 col-xs-12",on:{click:t.RefuseApply}},[t._v("撤回申请")]),t._v(" "),e("div",{staticClass:"btn btn-lg btn-info col-sm-2 col-sm-offset-1 col-xs-12",on:{click:t.PrintApply}},[t._v("打印申请表")])])])},staticRenderFns:[]};var c=e("VU/8")(i,s,!1,function(t){e("KtLh")},null,null).exports,o={name:"",components:{ApplyPanel:n.a,ApplyCheck:c},data:function(){return{applylist:[],checkname:"",checkedindex:!1}},methods:{CheckApply:function(t){window.location="/auselab/checkapplyeach/id/"+t},ChangeCheckname:function(){modal.Show({contains:"确认修改？",certain:"确定",certained:function(){axios.get("/auselab/changecheckname/name/"+this.checkname).then(modal.Common)}.bind(this)})}},mounted:function(){var t=this;axios.get("/auselab/applyshow").then(function(a){t.applylist=a.data.list,t.checkname=a.data.checkname})}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"ApplyShow"}},[e("transition-group",{staticClass:"flexdep",attrs:{name:"fadeUp",tag:"div",appear:""}},[e("p",{key:"title",staticClass:"pretitle"},[t._v("O-Lab申请表审核")]),t._v(" "),t._l(t.applylist,function(a,n){return e("div",{key:a.id,style:{"animation-delay":.1*n+"s"}},[e("ApplyPanel",{attrs:{apply:a,admin:"true"},on:{change:function(a){t.checkedindex=n}}})],1)}),t._v(" "),e("div",{key:"checkname"},[e("div",{staticClass:"input-group col-xs-12 col-sm-6 col-sm-offset-3"},[e("span",{staticClass:"input-group-addon"},[t._v("经办人姓名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkname,expression:"checkname"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.checkname},on:{input:function(a){a.target.composing||(t.checkname=a.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-btn"},[e("div",{staticClass:"btn btn-warning",on:{click:t.ChangeCheckname}},[t._v("修改")])])])]),t._v(" "),e("div",{key:"timetable"},[e("div",{staticClass:"btn btn-info col-lg-4 col-lg-offset-4 col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-12",staticStyle:{"margin-bottom":"10px"},attrs:{onclick:"modal.ShowTimeTable()"}},[t._v("点我查看时刻表")])])],2),t._v(" "),e("transition",{attrs:{name:"fadeRight"}},[!1!==t.checkedindex?e("ApplyCheck",{attrs:{apply:t.applylist[t.checkedindex]},on:{goback:function(a){t.checkedindex=!1}}}):t._e()],1)],1)},staticRenderFns:[]};var p=e("VU/8")(o,l,!1,function(t){e("qzhp")},"data-v-9662f758",null);a.default=p.exports},KtLh:function(t,a){},"U/fA":function(t,a,e){"use strict";var n={name:"",props:["apply","admin"],data:function(){return{}},computed:{State:function(){return["未提交","已过时","时间冲突","未通过审核","未审核","审核通过"][this.apply.state]},Time:function(){if(void 0==this.apply.ctime)return"";var t=new Date(1e3*this.apply.ctime),a=new Date(1e3*this.apply.etime),e=function(t){return t<10?"0"+t:t};return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+e(t.getMinutes())+"-"+a.getHours()+":"+e(a.getMinutes())}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ApplyPanel panel",class:{"panel-success":5==t.apply.state}},[e("div",{staticClass:"panel-heading"},[t._v("申请单编号:"+t._s(t.apply.id))]),t._v(" "),e("div",{staticClass:"panel-body"},[e("h5",[t._v("申请人姓名:"+t._s(t.apply.name))]),t._v(" "),e("h5",[t._v("申请单位:"+t._s(t.apply.unit))]),t._v(" "),e("h5",[t._v("活动名称:"+t._s(t.apply.actname))]),t._v(" "),e("h5",[t._v("活动时间:"+t._s(t.Time))]),t._v(" "),e("h5",[t._v("状态:"+t._s(t.State))])]),t._v(" "),e("div",{staticClass:"panel-footer"},[e("div",{staticClass:"row"},["true"==t.admin?e("div",{staticClass:"btn btn-warning",staticStyle:{float:"right","margin-right":"15px"},on:{click:function(a){t.$emit("change")}}},[t._v("修改")]):[e("div",{staticClass:"btn btn-info",staticStyle:{float:"right","margin-right":"15px"},on:{click:function(a){t.$emit("change")}}},[t._v("修改")]),t._v(" "),e("div",{staticClass:"btn btn-warning",staticStyle:{float:"right","margin-right":"5px"},on:{click:function(a){t.$emit("delete")}}},[t._v("删除")])]],2)])])},staticRenderFns:[]};var s=e("VU/8")(n,i,!1,function(t){e("ZKGw")},"data-v-090dce58",null);a.a=s.exports},ZKGw:function(t,a){},qzhp:function(t,a){}});
//# sourceMappingURL=5.bff705a4aa663629433e.js.map