webpackJsonp([12],{HdKy:function(t,e){},yM8Y:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.e(23).then(o.bind(null,"Qtga"));var i={name:"",data:function(){return{timer:!1}},methods:{Logout:function(){var t=this;axios.get("/index/logout").then(function(){t.$store.commit("Logout"),t.$nextTick(function(e){"MicroMessenger"==window.navigator.userAgent.match(/MicroMessenger/i)?modal.show=!1:t.AddCode()})})},AddCode:function(){var t=this;(function(){var t=this;axios.get("/index/gettoken").then(function(e){new QRCode(t.$el.querySelector(".logincode"),{text:"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.$store.state.appid+"&redirect_uri=https%3A%2F%2Fwww.oucolab.cn%2Findex%2Fcodevue&response_type=code&scope=snsapi_userinfo&state="+e.data+"#wechat_redirect",width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})})}).bind(this)(),this.timer=window.setInterval(function(){axios.get("/index/checklogin").then(function(e){1==e.data.state&&(t.$store.commit("Login",e.data),window.clearInterval(t.timer),modal.show=!1)})},2e3)}},mounted:function(){var t=this;this.$store.state.User.user||this.$nextTick(function(){t.AddCode()})},beforeDestroy:function(){!1!==this.timer&&window.clearInterval(this.timer)}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"LoginComp"}},[t.$store.state.User.user?[o("img",{staticClass:"img-rounded headimg",attrs:{src:t.$store.state.User.imgpath,alt:"140x140"}}),t._v(" "),o("div",{key:"1",staticStyle:{display:"table",width:"100%"}},[o("div",{staticClass:"col-xs-offset-3 col-xs-6 col-sm-offset-4 col-sm-4 btn btn-warning",on:{click:t.Logout}},[t._v("注销")])])]:[o("div",{key:"2",staticClass:"logincode"}),t._v(" "),o("h3",[t._v("请使用微信扫一扫登录")]),t._v(" "),o("h3",[t._v("(或在微信客户端中打开)")])]],2)},staticRenderFns:[]};var s=o("VU/8")(i,n,!1,function(t){o("HdKy")},null,null);e.default=s.exports}});
//# sourceMappingURL=12.4793b810be2f0de2f462.js.map